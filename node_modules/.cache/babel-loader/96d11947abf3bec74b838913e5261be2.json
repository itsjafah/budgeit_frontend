{"ast":null,"code":"import { ADD_USER, LOGIN, GET_PROFILE, EDIT_PROFILE, LOGOUT, GET_BUDGETS, GET_CATEGORIES, GET_EXPENSES } from '../constants/action-type';\nexport var addUser = function addUser(user, dispatch) {\n  console.log(user);\n  fetch('http://localhost:3000/signup', {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(user)\n  }).then(function (response) {\n    return response.json();\n  }).then(function (data) {\n    localStorage.setItem('jwt', data.jwt);\n    var _data$user = data.user,\n        budgets = _data$user.budgets,\n        categories = _data$user.categories,\n        expenses = _data$user.expenses;\n    dispatch({\n      type: ADD_USER,\n      payload: user\n    });\n    dispatch({\n      type: GET_BUDGETS,\n      payload: budgets\n    });\n    dispatch({\n      type: GET_CATEGORIES,\n      payload: categories\n    });\n    dispatch({\n      type: GET_EXPENSES,\n      payload: expenses\n    });\n  });\n};\nexport var login = function login(user, dispatch) {\n  fetch('http://localhost:3000/login', {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(user)\n  }).then(function (response) {\n    return response.json();\n  }).then(function (data) {\n    var _data$user2 = data.user,\n        budgets = _data$user2.budgets,\n        categories = _data$user2.categories,\n        expenses = _data$user2.expenses;\n    dispatch({\n      type: LOGIN,\n      payload: user\n    });\n    dispatch({\n      type: GET_BUDGETS,\n      payload: budgets\n    });\n    dispatch({\n      type: GET_CATEGORIES,\n      payload: categories\n    });\n    dispatch({\n      type: GET_EXPENSES,\n      payload: expenses\n    });\n  });\n};\nexport var userProfile = function userProfile(dispatch) {\n  fetch(\"http://localhost:3000/profile\", {\n    method: 'GET',\n    headers: {\n      Authorization: \"Bearer \".concat(localStorage.getItem('jwt'))\n    }\n  }).then(function (response) {\n    return response.json();\n  }).then(function (data) {\n    var _data$user3 = data.user,\n        budgets = _data$user3.budgets,\n        categories = _data$user3.categories,\n        expenses = _data$user3.expenses;\n    var user = {\n      id: data.user.id,\n      first_name: data.user.first_name,\n      last_name: data.user.last_name,\n      email: data.user.email\n    };\n    dispatch({\n      type: GET_PROFILE,\n      payload: user\n    });\n    dispatch({\n      type: GET_BUDGETS,\n      payload: budgets\n    });\n    dispatch({\n      type: GET_CATEGORIES,\n      payload: categories\n    });\n    dispatch({\n      type: GET_EXPENSES,\n      payload: expenses\n    });\n  });\n};\nexport var editUser = function editUser(user, dispatch) {\n  fetch(\"http://localhost:3000/users/\".concat(user.id, \"/edit\"), {\n    method: 'PATCH',\n    headers: {\n      Authorization: \"Bearer \".concat(localStorage.getItem('jwt')),\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(user)\n  }).then(function (response) {\n    return response.json();\n  }).then(function (data) {\n    dispatch({\n      type: EDIT_PROFILE,\n      payload: data\n    });\n  });\n};\nexport var logout = function logout(user, dispatch) {\n  fetch('http://localhost:3000/logout', {\n    method: 'DELETE'\n  }).then(function (response) {\n    return response.json();\n  }).then(function (data) {\n    dispatch({\n      type: LOGOUT,\n      payload: user\n    });\n    localStorage.removeItem('jwt');\n  });\n};","map":{"version":3,"sources":["/Users/sinnam/Desktop/mod5_project/budgeit_frontend/budgeit/src/actions/home.js"],"names":["ADD_USER","LOGIN","GET_PROFILE","EDIT_PROFILE","LOGOUT","GET_BUDGETS","GET_CATEGORIES","GET_EXPENSES","addUser","user","dispatch","console","log","fetch","method","headers","body","JSON","stringify","then","response","json","data","localStorage","setItem","jwt","budgets","categories","expenses","type","payload","login","userProfile","Authorization","getItem","id","first_name","last_name","email","editUser","logout","removeItem"],"mappings":"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","sourcesContent":["import {\n  ADD_USER,\n  LOGIN,\n  GET_PROFILE,\n  EDIT_PROFILE,\n  LOGOUT,\n  GET_BUDGETS,\n  GET_CATEGORIES,\n  GET_EXPENSES\n} from '../constants/action-type'\n\nexport const addUser = (user, dispatch) => {\n  console.log(user);\n  fetch('http://localhost:3000/signup', {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(user)\n  })\n    .then(response => response.json())\n    .then(data => {\n      localStorage.setItem('jwt', data.jwt)\n      const { budgets, categories, expenses } = data.user\n      dispatch({ type: ADD_USER, payload: user })\n      dispatch({ type: GET_BUDGETS, payload: budgets})\n      dispatch({ type: GET_CATEGORIES, payload: categories})\n      dispatch({ type: GET_EXPENSES, payload: expenses})\n    })\n}\n\nexport const login = (user, dispatch) => {\n  fetch('http://localhost:3000/login', {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(user)\n  })\n    .then(response => response.json())\n    .then(data => {\n      const { budgets, categories, expenses } = data.user\n      dispatch({ type: LOGIN, payload: user })\n      dispatch({ type: GET_BUDGETS, payload: budgets})\n      dispatch({ type: GET_CATEGORIES, payload: categories})\n      dispatch({ type: GET_EXPENSES, payload: expenses})\n    })\n}\n\nexport const userProfile = (dispatch) => {\n  fetch(`http://localhost:3000/profile`, {\n    method: 'GET',\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem('jwt')}`\n    }\n  })\n  .then(response => response.json())\n  .then(data => {\n    const { budgets, categories, expenses } = data.user\n    let user = {id: data.user.id, first_name: data.user.first_name, last_name: data.user.last_name, email: data.user.email}\n    dispatch({ type: GET_PROFILE, payload: user })\n    dispatch({ type: GET_BUDGETS, payload: budgets})\n    dispatch({ type: GET_CATEGORIES, payload: categories})\n    dispatch({ type: GET_EXPENSES, payload: expenses})\n  })\n}\n\nexport const editUser = (user, dispatch) => {\n  fetch(`http://localhost:3000/users/${user.id}/edit`, {\n    method: 'PATCH',\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem('jwt')}`,\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(user)\n  })\n  .then(response => response.json())\n  .then(data => {\n    dispatch({ type: EDIT_PROFILE, payload: data })\n  })\n}\n\nexport const logout = (user, dispatch) => {\n  fetch('http://localhost:3000/logout', {\n    method: 'DELETE'\n  })\n  .then(response => response.json())\n  .then(data => {\n    dispatch({ type: LOGOUT, payload: user })\n    localStorage.removeItem('jwt')\n  })\n}\n"]},"metadata":{},"sourceType":"module"}