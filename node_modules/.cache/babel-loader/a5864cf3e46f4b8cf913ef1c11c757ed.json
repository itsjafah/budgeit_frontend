{"ast":null,"code":"import { ADD_USER, LOGIN, GET_PROFILE, EDIT_PROFILE, LOGOUT } from '../constants/action-type';\nexport var addUser = function addUser(user, dispatch) {\n  console.log(user);\n  fetch('http://localhost:3000/signup', {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(user)\n  }).then(function (response) {\n    return response.json();\n  }).then(function (data) {\n    console.log(data); // debugger\n\n    localStorage.setItem('jwt', data.jwt);\n    debugger;\n    dispatch({\n      type: ADD_USER,\n      payload: data.user\n    });\n  });\n};\nexport var login = function login(user, dispatch) {\n  // console.log(user);\n  fetch('http://localhost:3000/login', {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(user)\n  }).then(function (response) {\n    return response.json();\n  }).then(function (data) {\n    // console.log(data)\n    dispatch({\n      type: LOGIN,\n      payload: data\n    });\n  });\n};\nexport var userProfile = function userProfile(user, dispatch) {\n  // console.log(user);\n  fetch(\"http://localhost:3000/profile\", {\n    method: 'GET',\n    headers: {\n      Authorization: \"Bearer \".concat(localStorage.getItem('jwt'))\n    }\n  }).then(function (response) {\n    return response.json();\n  }).then(function (data) {\n    // console.log(data)\n    // debugger\n    dispatch({\n      type: GET_PROFILE,\n      payload: data\n    });\n  });\n};\nexport var editUser = function editUser(user, dispatch) {\n  // console.log(user);\n  fetch(\"http://localhost:3000/users/\".concat(user.id, \"/edit\"), {\n    method: 'PATCH',\n    headers: {\n      Authorization: \"Bearer \".concat(localStorage.getItem('jwt')),\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(user)\n  }).then(function (response) {\n    return response.json();\n  }).then(function (data) {\n    // console.log(data)\n    dispatch({\n      type: EDIT_PROFILE,\n      payload: data\n    });\n  });\n};\nexport var logout = function logout(user, dispatch) {\n  // console.log(user);\n  fetch('http://localhost:3000/logout', {\n    method: 'DELETE'\n  }).then(function (response) {\n    return response.json();\n  }).then(function (data) {\n    // console.log(data);\n    dispatch({\n      type: LOGOUT,\n      payload: user\n    });\n    localStorage.removeItem('jwt');\n  });\n};","map":{"version":3,"sources":["/Users/sinnam/Desktop/budgeit_frontend/budgeit/src/actions/home.js"],"names":["ADD_USER","LOGIN","GET_PROFILE","EDIT_PROFILE","LOGOUT","addUser","user","dispatch","console","log","fetch","method","headers","body","JSON","stringify","then","response","json","data","localStorage","setItem","jwt","type","payload","login","userProfile","Authorization","getItem","editUser","id","logout","removeItem"],"mappings":"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","sourcesContent":["import {\n  ADD_USER,\n  LOGIN,\n  GET_PROFILE,\n  EDIT_PROFILE,\n  LOGOUT\n} from '../constants/action-type'\n\nexport const addUser = (user, dispatch) => {\n  console.log(user);\n  fetch('http://localhost:3000/signup', {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(user)\n  })\n    .then(response => response.json())\n    .then(data => {\n      console.log(data)\n      // debugger\n      localStorage.setItem('jwt', data.jwt)\n      debugger\n      dispatch({ type: ADD_USER, payload: data.user })\n    })\n}\n\nexport const login = (user, dispatch) => {\n  // console.log(user);\n  fetch('http://localhost:3000/login', {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(user)\n  })\n    .then(response => response.json())\n    .then(data => {\n      // console.log(data)\n      dispatch({ type: LOGIN, payload: data })\n    })\n}\n\nexport const userProfile = (user, dispatch) => {\n  // console.log(user);\n  fetch(`http://localhost:3000/profile`, {\n    method: 'GET',\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem('jwt')}`\n    }\n  })\n  .then(response => response.json())\n  .then(data => {\n    // console.log(data)\n    // debugger\n    dispatch({ type: GET_PROFILE, payload: data })\n  })\n}\n\nexport const editUser = (user, dispatch) => {\n  // console.log(user);\n  fetch(`http://localhost:3000/users/${user.id}/edit`, {\n    method: 'PATCH',\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem('jwt')}`,\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(user)\n  })\n  .then(response => response.json())\n  .then(data => {\n    // console.log(data)\n    dispatch({ type: EDIT_PROFILE, payload: data })\n  })\n}\n\nexport const logout = (user, dispatch) => {\n  // console.log(user);\n  fetch('http://localhost:3000/logout', {\n    method: 'DELETE'\n  })\n  .then(response => response.json())\n  .then(data => {\n    // console.log(data);\n    dispatch({ type: LOGOUT, payload: user })\n    localStorage.removeItem('jwt')\n  })\n}\n"]},"metadata":{},"sourceType":"module"}